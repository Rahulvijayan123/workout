{"test_id": "micro-sexbw-bench-threshold-00", "test_category": "progression", "description": "Microloading with sex/BW tier scaling near the female 'high' bench threshold; alternating plate constraints tests rounding + holds.", "input": {"user_profile": {"sex": "female", "age": 27, "height_cm": 164, "body_weight_lb": 132.0, "experience_level": "intermediate", "program": "upper_lower_4x", "goal": "strength"}, "equipment": ["barbell", "dumbbell"], "equipment_config": {"units": "lb", "bar_weight_lb": 45, "load_step_lb": 1.25}, "today_metrics": {"body_weight_lb": 131.7, "sleep_hours": 7.2, "hrv_ms": 55, "resting_hr_bpm": 61, "soreness_1_to_10": 4, "stress_1_to_10": 4, "steps": 8500, "calories_est": 2400}, "today_session_template": [{"lift": "bench", "sets": 4, "reps": 6}, {"lift": "ohp", "sets": 3, "reps": 6}, {"lift": "row", "sets": 3, "reps": 10}], "recent_lift_history": {"bench": [{"date": "2026-02-08", "weight_lb": 117.5, "reps": 6, "top_rpe": 7.2, "outcome": "success", "variation": "standard"}], "ohp": [], "row": []}, "lift_state": {"bench": {"exerciseId": "bench", "lastWorkingWeight": {"value": 117.5, "unit": "lb"}, "rollingE1RM": 141.0, "failureCount": 0, "highRpeStreak": 0, "lastDeloadDate": null, "trend": "stable", "successStreak": 1, "successfulSessionsCount": 1, "recentReadinessScores": []}}, "days_since_last_session": 3, "days_since_lift_exposure": {"bench": 3}, "event_flags": {"missed_session": false, "injury_flags": {}, "planned_deload_week": false, "gym": "micro"}, "config_overrides": {"progression_policy": "double_progression", "sex_bw_scaling_enabled": true}}, "expected_output": {"session_prescription_for_today": [{"lift": "bench", "prescribed_weight_lb": 120.0, "sets": 4, "target_reps": 6, "target_rpe": 8.0, "decision": "increase", "reason_code": "microload_scaled_increment_medium", "adjustment_kind": "none", "relative_strength": 1.068, "tier": "medium", "acceptable_range_lb": [117.5, 122.5]}, {"lift": "ohp", "prescribed_weight_lb": null, "sets": 3, "target_reps": 6, "target_rpe": 7.75, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}, {"lift": "row", "prescribed_weight_lb": null, "sets": 3, "target_reps": 10, "target_rpe": 7.5, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}]}, "assertions": [{"field": "session_prescription_for_today[0].decision", "expected": "increase"}, {"field": "session_prescription_for_today[0].prescribed_weight_lb", "expected_range": [117.5, 122.5]}]}
{"test_id": "micro-sexbw-bench-threshold-01", "test_category": "progression", "description": "Microloading with sex/BW tier scaling near the female 'high' bench threshold; alternating plate constraints tests rounding + holds.", "input": {"user_profile": {"sex": "female", "age": 27, "height_cm": 164, "body_weight_lb": 132.0, "experience_level": "intermediate", "program": "upper_lower_4x", "goal": "strength"}, "equipment": ["barbell", "dumbbell"], "equipment_config": {"units": "lb", "bar_weight_lb": 45, "load_step_lb": 2.5}, "today_metrics": {"body_weight_lb": 131.8, "sleep_hours": 7.2, "hrv_ms": 55, "resting_hr_bpm": 61, "soreness_1_to_10": 4, "stress_1_to_10": 4, "steps": 8500, "calories_est": 2400}, "today_session_template": [{"lift": "bench", "sets": 4, "reps": 6}, {"lift": "ohp", "sets": 3, "reps": 6}, {"lift": "row", "sets": 3, "reps": 10}], "recent_lift_history": {"bench": [{"date": "2026-02-08", "weight_lb": 121.25, "reps": 6, "top_rpe": 7.2, "outcome": "success", "variation": "standard"}], "ohp": [], "row": []}, "lift_state": {"bench": {"exerciseId": "bench", "lastWorkingWeight": {"value": 120.0, "unit": "lb"}, "rollingE1RM": 145.5, "failureCount": 0, "highRpeStreak": 0, "lastDeloadDate": null, "trend": "stable", "successStreak": 1, "successfulSessionsCount": 1, "recentReadinessScores": []}}, "days_since_last_session": 3, "days_since_lift_exposure": {"bench": 3}, "event_flags": {"missed_session": false, "injury_flags": {}, "planned_deload_week": false, "gym": "coarse"}, "config_overrides": {"progression_policy": "double_progression", "sex_bw_scaling_enabled": true}}, "expected_output": {"session_prescription_for_today": [{"lift": "bench", "prescribed_weight_lb": 120.0, "sets": 4, "target_reps": 6, "target_rpe": 8.0, "decision": "hold", "reason_code": "coarse_step_blocks_scaled_increment_high_tier", "adjustment_kind": "none", "relative_strength": 1.102, "tier": "high", "acceptable_range_lb": [117.5, 122.5]}, {"lift": "ohp", "prescribed_weight_lb": null, "sets": 3, "target_reps": 6, "target_rpe": 7.75, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}, {"lift": "row", "prescribed_weight_lb": null, "sets": 3, "target_reps": 10, "target_rpe": 7.5, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}]}, "assertions": [{"field": "session_prescription_for_today[0].decision", "expected": "hold"}, {"field": "session_prescription_for_today[0].prescribed_weight_lb", "expected_range": [117.5, 122.5]}]}
{"test_id": "micro-sexbw-bench-threshold-02", "test_category": "progression", "description": "Microloading with sex/BW tier scaling near the female 'high' bench threshold; alternating plate constraints tests rounding + holds.", "input": {"user_profile": {"sex": "female", "age": 27, "height_cm": 164, "body_weight_lb": 132.0, "experience_level": "intermediate", "program": "upper_lower_4x", "goal": "strength"}, "equipment": ["barbell", "dumbbell"], "equipment_config": {"units": "lb", "bar_weight_lb": 45, "load_step_lb": 1.25}, "today_metrics": {"body_weight_lb": 132.2, "sleep_hours": 7.2, "hrv_ms": 55, "resting_hr_bpm": 61, "soreness_1_to_10": 4, "stress_1_to_10": 4, "steps": 8500, "calories_est": 2400}, "today_session_template": [{"lift": "bench", "sets": 4, "reps": 6}, {"lift": "ohp", "sets": 3, "reps": 6}, {"lift": "row", "sets": 3, "reps": 10}], "recent_lift_history": {"bench": [{"date": "2026-02-08", "weight_lb": 123.75, "reps": 6, "top_rpe": 7.2, "outcome": "success", "variation": "standard"}], "ohp": [], "row": []}, "lift_state": {"bench": {"exerciseId": "bench", "lastWorkingWeight": {"value": 123.75, "unit": "lb"}, "rollingE1RM": 148.5, "failureCount": 0, "highRpeStreak": 0, "lastDeloadDate": null, "trend": "stable", "successStreak": 1, "successfulSessionsCount": 1, "recentReadinessScores": []}}, "days_since_last_session": 3, "days_since_lift_exposure": {"bench": 3}, "event_flags": {"missed_session": false, "injury_flags": {}, "planned_deload_week": false, "gym": "micro"}, "config_overrides": {"progression_policy": "double_progression", "sex_bw_scaling_enabled": true}}, "expected_output": {"session_prescription_for_today": [{"lift": "bench", "prescribed_weight_lb": 125.0, "sets": 4, "target_reps": 6, "target_rpe": 8.0, "decision": "increase", "reason_code": "microload_scaled_increment_high", "adjustment_kind": "none", "relative_strength": 1.125, "tier": "high", "acceptable_range_lb": [122.5, 127.5]}, {"lift": "ohp", "prescribed_weight_lb": null, "sets": 3, "target_reps": 6, "target_rpe": 7.75, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}, {"lift": "row", "prescribed_weight_lb": null, "sets": 3, "target_reps": 10, "target_rpe": 7.5, "decision": "hold", "reason_code": "accessory_not_scored", "adjustment_kind": "accessory"}]}, "assertions": [{"field": "session_prescription_for_today[0].decision", "expected": "increase"}, {"field": "session_prescription_for_today[0].prescribed_weight_lb", "expected_range": [122.5, 127.5]}]}
